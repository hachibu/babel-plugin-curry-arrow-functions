#!/usr/bin/env node

var fs     = require('fs'),
    babel  = require('babel-core'),
    plugin = require('../dist/index').default;

function exitUnless(cond, message) {
  if (cond) { return; }
  console.log('Error:', message);
  process.exit(1);
}

var filepath = process.argv[2];

exitUnless(filepath, 'filepath argument missing');
exitUnless(fs.existsSync(filepath), 'file does not exist');

var result = babel.transformFileSync(filepath, { plugins: [plugin] });

console.log(result.code);
